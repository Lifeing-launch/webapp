---
description: 
globs: 
alwaysApply: true
---
# Lifeing Webapp - PadrÃµes de Desenvolvimento

## VisÃ£o Geral do Projeto

Este Ã© um projeto **Next.js 15** com **App Router**, usando **TypeScript**, **Tailwind CSS**, **Supabase** para backend/auth, **Strapi** como CMS, **Stripe** para pagamentos, e **shadcn/ui** como design system base.

### Stack TecnolÃ³gico
- **Frontend**: Next.js 15, React 18, TypeScript
- **Styling**: Tailwind CSS, shadcn/ui, CSS Variables
- **Backend**: Supabase (Auth, Database, Storage)
- **CMS**: Strapi Headless CMS
- **Payments**: Stripe Integration
- **Testing**: Jest, React Testing Library
- **Icons**: Lucide React

## Estrutura de Regras

### ğŸ“ [Arquitetura de Projeto](mdc:.cursor/rules/project-architecture.mdc)
- OrganizaÃ§Ã£o de pastas e estrutura Next.js App Router
- SeparaÃ§Ã£o de responsabilidades entre pages, components, services
- PadrÃµes de layout e route groups
- Referencias de arquivos principais

### ğŸ” [PadrÃµes Supabase](mdc:.cursor/rules/supabase-patterns.mdc)
- Tipos de clientes Supabase (browser, server, admin)
- AutenticaÃ§Ã£o e middleware patterns
- Server actions para auth operations
- Tratamento de erros e cookies seguros

### ğŸ¨ [PadrÃµes de Componentes](mdc:.cursor/rules/component-patterns.mdc)
- ConvenÃ§Ãµes de nomenclatura (interfaces com `I`, kebab-case para arquivos)
- Estrutura de componentes e props
- Design system com shadcn/ui
- Estados de loading e skeleton components

### ğŸ› ï¸ [PadrÃµes de API](mdc:.cursor/rules/api-patterns.mdc)
- Estrutura de API routes por feature
- IntegraÃ§Ã£o com Strapi CMS e Stripe
- Error handling e autenticaÃ§Ã£o
- Webhooks e edge functions

### ğŸ§ª [PadrÃµes de Testing](mdc:.cursor/rules/testing-patterns.mdc)
- Setup Jest + React Testing Library
- ConvenÃ§Ãµes de nomenclatura para testes
- Mocking patterns para Supabase, Next.js, fetch
- Testing de formulÃ¡rios e interaÃ§Ãµes

### ğŸ“ [PadrÃµes TypeScript](mdc:.cursor/rules/typescript-patterns.mdc)
- OrganizaÃ§Ã£o de tipos e interfaces
- Patterns para APIs externas (Strapi, Supabase)
- Generic types e utility types
- Type guards e branded types

### ğŸ¨ [PadrÃµes de Estilo](mdc:.cursor/rules/styling-patterns.mdc)
- Design system com shadcn/ui e Tailwind
- CSS variables e tema dark/light
- Component styling patterns
- Responsive design e accessibility

## ConvenÃ§Ãµes Principais

### Nomenclatura
- **Componentes**: PascalCase (`PageTemplate`, `UserProfile`)
- **Arquivos**: kebab-case (`page-template.tsx`, `user-profile.tsx`)
- **Interfaces**: Prefixo `I` (`IPageTemplate`, `IBanner`)
- **Hooks**: camelCase com `use` (`useMobile`, `useDebounce`)

### Estrutura de Arquivos
```
src/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ (auth)/            # Route group para autenticaÃ§Ã£o
â”‚   â”œâ”€â”€ (protected)/       # Route group para pÃ¡ginas protegidas
â”‚   â””â”€â”€ api/               # API routes organizadas por feature
â”œâ”€â”€ components/            # Componentes React
â”‚   â”œâ”€â”€ ui/               # Design system (shadcn/ui + custom)
â”‚   â”œâ”€â”€ layout/           # Componentes de layout
â”‚   â””â”€â”€ [feature]/        # Componentes por feature
â”œâ”€â”€ hooks/                # Custom hooks
â”œâ”€â”€ services/             # LÃ³gica de negÃ³cio e integraÃ§Ãµes
â”œâ”€â”€ typing/               # Tipos TypeScript
â”œâ”€â”€ utils/                # Utilidades e helpers
â””â”€â”€ middleware.ts         # Middleware de autenticaÃ§Ã£o
```

### Fluxo de Desenvolvimento

1. **Pages**: ComposiÃ§Ã£o e orquestraÃ§Ã£o, sem lÃ³gica complexa
2. **Components**: UI pura, recebe dados via props
3. **Services**: LÃ³gica de negÃ³cio e integraÃ§Ãµes externas
4. **Utils**: FunÃ§Ãµes utilitÃ¡rias puras
5. **API Routes**: Endpoints organizados por feature com auth

## Quick Start

### Criando uma Nova PÃ¡gina
```typescript
// src/app/(protected)/new-feature/page.tsx
import { Breadcrumb } from "@/components/layout/header";
import PageTemplate from "@/components/layout/page-template";
import { sidebarIcons } from "@/components/layout/nav/app-sidebar";

const breadcrumbs: Breadcrumb[] = [
  { label: "Dashboard", href: "/dashboard" },
  { label: "New Feature" }
];

export default function NewFeaturePage() {
  return (
    <PageTemplate 
      title="New Feature"
      breadcrumbs={breadcrumbs}
      headerIcon={sidebarIcons.feature}
    >
      {/* Page content */}
    </PageTemplate>
  );
}
```

### Criando um Novo Componente
```typescript
// src/components/feature/new-component.tsx
import { cn } from "@/lib/utils";

export interface INewComponent {
  children: React.ReactNode;
  className?: string;
  variant?: "default" | "primary";
}

export const NewComponent = ({ 
  children, 
  className,
  variant = "default" 
}: INewComponent) => {
  return (
    <div className={cn(
      "base-styles",
      {
        "variant-primary": variant === "primary",
        "variant-default": variant === "default",
      },
      className
    )}>
      {children}
    </div>
  );
};

export default NewComponent;
```

### Criando uma API Route
```typescript
// src/app/api/feature/route.ts
import { NextRequest, NextResponse } from "next/server";
import { checkUserIsAuthenticated } from "@/utils/supabase/auth";

export async function GET(request: NextRequest) {
  try {
    await checkUserIsAuthenticated();
  } catch {
    return NextResponse.json({ error: "Unauthenticated" }, { status: 401 });
  }

  try {
    // LÃ³gica da API
    const data = await fetchData();
    return NextResponse.json(data);
  } catch (err) {
    console.error("Error in API route:", err);
    return NextResponse.json(
      { error: "Internal server error" }, 
      { status: 500 }
    );
  }
}
```

## PrÃ³ximos Passos

Ao desenvolver novas features:

1. **Leia as regras relevantes** para entender os padrÃµes
2. **Siga a estrutura estabelecida** para consistÃªncia
3. **Escreva testes** para componentes e utils crÃ­ticos
4. **Use TypeScript rigorosamente** com interfaces tipadas
5. **Mantenha acessibilidade** e responsividade em mente

---

**ğŸ“š Para detalhes especÃ­ficos, consulte as regras individuais linkadas acima.**
